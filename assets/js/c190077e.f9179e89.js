"use strict";(self.webpackChunkopendal_website=self.webpackChunkopendal_website||[]).push([[8363],{383:(e,n,s)=>{s.d(n,{A:()=>l});var a=s(758),t=s(6070);function l({children:e,owner:n="apache",repo:s="opendal",branch:l="main",basePath:r="",components:i={}}){const o=e=>{const a=e.replace(/^\.\//,"");return`https://github.com/${n}/${s}/blob/${l}/${r}${a}`},d={...i,a:e=>{const{href:n,...s}=e;return n&&n.startsWith("./")?(0,t.jsx)("a",{...s,href:o(n)}):(0,t.jsx)("a",{...e})},p:e=>{const{children:n}=e;if("string"==typeof n){const e=/\[(.*?)\]:\s*(\.\/[^\s]+)/g;if(e.test(n)){const s=n.replace(e,(e,n,s)=>`[${n}]: ${o(s)}`);return(0,t.jsx)("p",{children:s})}}return(0,t.jsx)("p",{...e})}};return"string"==typeof e?(e=>{if("string"!=typeof e)return e;let n=e.replace(/\[(.*?)\]\((\.\/[^)]+)\)/g,(e,n,s)=>`[${n}](${o(s)})`);return n=n.replace(/\[(.*?)\]:\s*(\.\/[^\s]+)/g,(e,n,s)=>`[${n}]: ${o(s)}`),n})(e):a.isValidElement(e)?a.cloneElement(e,{components:{...e.props.components||{},...d}}):e}},6738:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var a=s(758);const t={},l=a.createContext(t);function r(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(l.Provider,{value:n},e.children)}},8673:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>d,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"bindings/lua","title":"Lua \ud83d\udea7","description":"","source":"@site/docs/20-bindings/lua.mdx","sourceDirName":"20-bindings","slug":"/bindings/lua","permalink":"/bindings/lua","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/opendal/tree/main/website/docs/20-bindings/lua.mdx","tags":[],"version":"current","lastUpdatedBy":"Friends A.","lastUpdatedAt":1741941961000,"frontMatter":{"title":"Lua \ud83d\udea7"},"sidebar":"docs","previous":{"title":"Java","permalink":"/bindings/java"},"next":{"title":"Node.js","permalink":"/bindings/nodejs"}}');var t=s(6070),l=s(6738),r=s(383);function i(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"apache-opendal-lua-binding-wip",children:"Apache OpenDAL\u2122 Lua Binding (WIP)"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://opendal.apache.org/bindings/lua/",children:(0,t.jsx)(n.img,{src:"/img/external/552ab0d9376d217ab2e8b0ade233afb8.svg",alt:""})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/apache/opendal/assets/5351546/87bbf6e5-f19e-449a-b368-3e283016c887",alt:""})}),"\n",(0,t.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local opendal = require("opendal")\n\nlocal op, err = opendal.operator.new("fs",{root="/tmp"})\nif err ~= nil then\n    print(err)\n    return\nend\nop:write("test.txt","hello world")\nprint("read: ", op:read("test.txt"))\n'})}),"\n",(0,t.jsx)(n.h2,{id:"lua-version",children:"Lua version"}),"\n",(0,t.jsxs)(n.p,{children:["You have to enable one of the features: lua54, lua53, lua52, lua51, luajit(52) or luau in ",(0,t.jsx)(n.code,{children:"Cargo.toml"}),", according to the chosen Lua version. Default Lua version is 5.2."]}),"\n",(0,t.jsx)(n.h2,{id:"build-from-source",children:"Build from source"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Build OpenDAL Lua Interface"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ cd bindings/lua\n$ cargo build --package opendal-lua --release\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Install opendal Lua library"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# copy to lua share library directory\n# default lua5.2 share library directory is /usr/lib/lua/5.2\n$ cp ../../target/release/libopendal_lua.so /usr/lib/lua/5.2/opendal.so\n"})}),"\n",(0,t.jsx)(n.h2,{id:"install-from-luarocks",children:"Install from LuaRocks"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ luarocks make\n"})}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ lua5.2 example/fs.lua\nread:   hello world\n"})}),"\n",(0,t.jsx)(n.h2,{id:"test",children:"Test"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ busted -o gtest test/opendal_test.lua\n[==========] Running tests from scanned files.\n[----------] Global test environment setup.\n[----------] Running tests from test/opendal_test.lua\n[ RUN      ] test/opendal_test.lua @ 24: opendal unit test opendal fs schema operator function in fs schema\n[       OK ] test/opendal_test.lua @ 24: opendal unit test opendal fs schema operator function in fs schema (1.52 ms)\n[ RUN      ] test/opendal_test.lua @ 36: opendal unit test opendal fs schema meta function in fs schema\n[       OK ] test/opendal_test.lua @ 36: opendal unit test opendal fs schema meta function in fs schema (0.24 ms)\n[----------] 2 tests from test/opendal_test.lua (3.47 ms total)\n\n[----------] Global test environment teardown.\n[==========] 2 tests from 1 test file ran. (3.54 ms total)\n[  PASSED  ] 2 tests.\n"})}),"\n",(0,t.jsx)(n.h2,{id:"license-and-trademarks",children:"License and Trademarks"}),"\n",(0,t.jsxs)(n.p,{children:["Licensed under the Apache License, Version 2.0: ",(0,t.jsx)(n.a,{href:"http://www.apache.org/licenses/LICENSE-2.0",children:"http://www.apache.org/licenses/LICENSE-2.0"})]}),"\n",(0,t.jsx)(n.p,{children:"Apache OpenDAL, OpenDAL, and Apache are either registered trademarks or trademarks of the Apache Software Foundation."})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}const d={title:"Lua \ud83d\udea7"},c=void 0,u={},p=[{value:"Example",id:"example",level:2},{value:"Lua version",id:"lua-version",level:2},{value:"Build from source",id:"build-from-source",level:2},{value:"Install from LuaRocks",id:"install-from-luarocks",level:2},{value:"Usage",id:"usage",level:2},{value:"Test",id:"test",level:2},{value:"License and Trademarks",id:"license-and-trademarks",level:2}];function h(e){return(0,t.jsx)(r.A,{basePath:"bindings/lua/",children:(0,t.jsx)(o,{components:{h1:"h2"}})})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h()}}}]);